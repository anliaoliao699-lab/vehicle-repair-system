<view class="dashboard">
  <view class="user-card">
    <view class="user-info">
      <view class="avatar">{{user.name}}</view>
      <view class="info">
        <view class="name">{{user.name}}</view>
        <view class="role">{{isAdmin ? '管理员' : isWorker ? '员工' : '用户'}}</view>
      </view>
    </view>
    <view class="logout-btn" bindtap="handleLogout">
      <text>退出</text>
    </view>
  </view>

  <!-- 统计卡片 - 添加待分配 -->
  <view class="stats-container">
    <!-- ✅ 新增：待分配 -->
    <view class="stat-card pending" bindtap="navigateToPending">
      <view class="stat-value">{{stats.pendingOrders}}</view>
      <view class="stat-label">待分配</view>
    </view>
    <view class="stat-card" bindtap="navigateToAssigned">
      <view class="stat-value">{{stats.assignedOrders}}</view>
      <view class="stat-label">已分配</view>
    </view>
    <view class="stat-card" bindtap="navigateToCompleted">
      <view class="stat-value">{{stats.completedOrders}}</view>
      <view class="stat-label">已完成</view>
    </view>
  </view>

  <!-- 快捷操作 -->
  <view class="quick-actions">
    <view class="section-title">快捷操作</view>
    <view class="action-grid" wx:if="{{isAdmin}}">
      <!-- 管理员：显示创建工单、工单列表、个人中心 -->
      <view class="action-item" bindtap="navigateToCreateOrder">
        <view class="action-text">创建工单</view>
      </view>
      <view class="action-item" bindtap="navigateToOrders">
        <view class="action-text">工单列表</view>
      </view>
      <view class="action-item" bindtap="navigateToProfile">
        <view class="action-text">个人中心</view>
      </view>
    </view>
    <view class="action-grid worker-grid" wx:else>
      <!-- 员工：只显示工单列表、个人中心 -->
      <view class="action-item" bindtap="navigateToOrders">
        <view class="action-text">工单列表</view>
      </view>
      <view class="action-item" bindtap="navigateToProfile">
        <view class="action-text">个人中心</view>
      </view>
    </view>
  </view>

  <view class="recent-orders">
    <view class="section-title">最近工单</view>
    <view wx:if="{{recentOrders.length > 0}}">
      <view wx:for="{{recentOrders}}" wx:key="id" class="order-item" bindtap="viewOrderDetail" data-id="{{item.id}}">
        <view class="order-header">
          <view class="order-no">{{item.orderNo}}</view>
          <view class="order-status">{{item.statusText}}</view>
        </view>
        <view class="order-vehicle">{{item.vehicleInfo}}</view>
        <view class="order-description">{{item.description}}</view>
      </view>
    </view>
    <view wx:else class="empty-state">
      <view class="empty-text">暂无工单</view>
    </view>
  </view>
</view>
