<view class="register-container">
  <view class="logo-area">
    <view class="logo-icon">🔧</view>
    <view class="app-title">用户注册</view>
    <view class="app-desc">创建您的维修服务账号</view>
  </view>

  <view class="form-area">
    <view class="input-group">
      <view class="input-label">选择身份</view>
      <picker
        range="{{roleOptions}}"
        range-key="label"
        value="{{roleIndex}}"
        bindchange="onRoleChange"
        class="role-picker"
      >
        <view class="picker-value">
          {{roleOptions[roleIndex].label}}
        </view>
      </picker>
    </view>

    <!-- 管理员验证码（仅管理员显示） -->
    <view class="input-group" wx:if="{{role === 'admin'}}">
      <view class="input-label">
        管理员验证码 <text class="required">*</text>
      </view>
      <input
        type="text"
        placeholder="请输入管理员验证码"
        placeholder-class="placeholder"
        value="{{adminCode}}"
        bindinput="onAdminCodeInput"
        class="input-field"
      />
      <view class="hint-text">请联系系统管理员获取验证码</view>
    </view>

    <view class="input-group">
      <view class="input-label">手机号</view>
      <input
        type="text"
        placeholder="请输入手机号"
        placeholder-class="placeholder"
        value="{{phone}}"
        bindinput="onPhoneInput"
        maxlength="11"
        class="input-field"
      />
    </view>

    <view class="input-group">
      <view class="input-label">密码</view>
      <view class="password-input-wrapper">
        <input
          type="{{showPassword ? 'text' : 'password'}}"
          placeholder="请输入密码（至少6位）"
          placeholder-class="placeholder"
          value="{{password}}"
          bindinput="onPasswordInput"
          class="input-field"
        />
        <view class="toggle-password" bindtap="togglePasswordVisibility">
          {{showPassword ? '隐藏' : '显示'}}
        </view>
      </view>
    </view>

    <view class="input-group">
      <view class="input-label">确认密码</view>
      <view class="password-input-wrapper">
        <input
          type="{{showConfirmPassword ? 'text' : 'password'}}"
          placeholder="请再次输入密码"
          placeholder-class="placeholder"
          value="{{confirmPassword}}"
          bindinput="onConfirmPasswordInput"
          class="input-field"
        />
        <view class="toggle-password" bindtap="toggleConfirmPasswordVisibility">
          {{showConfirmPassword ? '隐藏' : '显示'}}
        </view>
      </view>
    </view>

    <view class="input-group">
      <view class="input-label">姓名</view>
      <input
        type="text"
        placeholder="请输入真实姓名"
        placeholder-class="placeholder"
        value="{{name}}"
        bindinput="onNameInput"
        class="input-field"
      />
    </view>

    <view class="role-description">
      <view class="desc-title">身份说明：</view>
      <view class="desc-item" wx:if="{{role === 'admin'}}">
        <text class="desc-icon">👨‍💼</text>
        <text class="desc-text">管理员：拥有系统最高权限，可管理所有用户和工单（需要验证码）</text>
      </view>
      <view class="desc-item" wx:if="{{role === 'worker'}}">
        <text class="desc-icon">🔧</text>
        <text class="desc-text">员工：可接单、处理维修工单、更新工单状态</text>
      </view>
    </view>

    <button
      type="primary"
      class="register-btn"
      bindtap="handleRegister"
      disabled="{{loading}}"
    >
      {{loading ? '注册中...' : '注册'}}
    </button>

    <view class="login-link">
      已有账号？
      <text class="link-text" bindtap="navigateToLogin">立即登录</text>
    </view>
  </view>

</view>
