<view class="work-order-list">
  <!-- 搜索栏 -->
  <view class="search-bar">
    <input
      type="text"
      placeholder="搜索工单号、车辆、描述"
      value="{{searchText}}"
      bindinput="onSearchInput"
      class="search-input"
    />
  </view>

  <!-- 状态筛选 -->
  <view class="status-filter">
    <picker
      range="{{statusOptions}}"
      range-key="label"
      value="{{0}}"
      bindchange="onStatusChange"
      class="status-picker"
    >
      <view class="picker-value">{{status}}</view>
    </picker>
  </view>

  <!-- 工单列表 -->
  <view class="order-list">
    <view wx:if="{{filteredOrders.length > 0}}">
      <view
        wx:for="{{filteredOrders}}"
        wx:key="id"
        class="order-card"
        bindtap="viewOrderDetail"
        data-id="{{item.id}}"
      >
        <!-- 工单头部 -->
        <view class="order-header">
          <view class="order-no">{{item.orderNo}}</view>
          <view
            class="order-status"
            style="background-color: {{item.status === 'in_progress' ? '#ff6b6b' : item.status === 'completed' ? '#07c160' : item.status === 'new' ? '#0066ff' : item.status === 'assigned' ? '#ff9500' : '#9254de'}}"
          >
            {{item.status === 'new' ? '新建' : item.status === 'assigned' ? '已分配' : item.status === 'in_progress' ? '进行中' : item.status === 'completed' ? '已完成' : item.status === 'paid' ? '已支付' : item.status}}
          </view>
        </view>

        <!-- 车辆信息 -->
        <view class="order-vehicle">
          <view class="vehicle-icon">🚗</view>
          <view class="vehicle-info">{{item.vehicleInfo}}</view>
        </view>

        <!-- 工单描述 -->
        <view class="order-description">{{item.description}}</view>

        <!-- 工单底部 -->
        <view class="order-footer">
          <view class="order-cost">¥{{item.estimatedCost || 0}}</view>
          <view class="order-date">{{item.createdAt}}</view>
        </view>
      </view>
    </view>

    <!-- 空状态 -->
    <view wx:else class="empty-state">
      <view class="empty-icon">📋</view>
      <view class="empty-text">暂无工单</view>
      <button
        type="primary"
        class="create-btn"
        bindtap="navigateToCreate"
      >
        创建工单
      </button>
    </view>
  </view>

  <!-- 创建工单按钮 -->
  <view class="fab-button" bindtap="navigateToCreate">
    <text>+</text>
  </view>
</view>
